<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRODESAL Castro - Tu Centro de Informaci칩n</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#10B981">
    <meta name="description" content="Tu centro de informaci칩n personalizado con clima, noticias y manejo sanitario">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" sizes="192x192" href="assets/icon-192.png">
    <link rel="apple-touch-icon" href="assets/icon-192.png">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <!-- Header Principal -->
    <header class="app-header">
        <div class="header-content">
            <div class="header-info">
                <h1 class="app-title">
                    <img src="assets/div pecuaria.png" alt="PRODESAL CASTRO" class="prodesal-logo">
                    PRODESAL de Castro
                </h1>
                <p class="app-subtitle">Informaci칩n agr칤cola y ganadera de Castro, Chilo칠</p>
            </div>
            <div class="header-actions">
                <!-- Indicador de Estado de Conexi칩n -->
                <div class="connection-status online">
                    <i data-lucide="wifi"></i>
                    <span>En l칤nea</span>
                </div>
                
                <!-- Bot칩n de Actualizaci칩n Manual -->
                <button class="refresh-btn" id="refreshBtn" title="Actualizar datos">
                    <i data-lucide="refresh-cw"></i>
                </button>
                
                <button class="notification-btn" id="notificationBtn">
                    <i data-lucide="bell"></i>
                    <span class="notification-badge">3</span>
                </button>
                <button class="settings-btn" id="settingsBtn">
                    <i data-lucide="settings"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Barra de B칰squeda Global -->
    <div class="search-section">
        <div class="search-container">
            <div class="search-box">
                <i data-lucide="search"></i>
                <input type="text" placeholder="Buscar informaci칩n, noticias, servicios..." id="globalSearch">
            </div>
        </div>
    </div>

    <!-- Navegaci칩n Principal -->
    <nav class="main-nav">
        <div class="nav-container">
            <button class="nav-tab active" data-section="dashboard">
                <i data-lucide="home"></i>
                <span>Inicio</span>
            </button>
            <button class="nav-tab" data-section="news">
                <i data-lucide="newspaper"></i>
                <span>Noticias</span>
            </button>
            <button class="nav-tab" data-section="animals">
                <i data-lucide="heart"></i>
                <span>Animales</span>
            </button>
            <button class="nav-tab" data-section="plants">
                <i data-lucide="leaf"></i>
                <span>Plantas</span>
            </button>
            <button class="nav-tab" data-section="weather">
                <i data-lucide="cloud-sun"></i>
                <span>Clima</span>
            </button>
            <button class="nav-tab" data-section="activities">
                <i data-lucide="calendar"></i>
                <span>Actividades</span>
            </button>
            <button class="nav-tab" data-section="products">
                <i data-lucide="shopping-bag"></i>
                <span>Productos</span>
            </button>
            <button class="nav-tab" data-section="directory">
                <i data-lucide="phone"></i>
                <span>Directorio</span>
            </button>
        </div>
    </nav>

    <!-- Contenido Principal -->
    <main class="main-content">
        <!-- Dashboard Section -->
        <section id="dashboard" class="content-section active">
            <div class="dashboard-grid">
                <!-- Clima -->
                <div class="dashboard-card" data-section="weather">
                    <div class="card-icon">
                        <i data-lucide="cloud-sun"></i>
                    </div>
                    <div class="card-content">
                        <h3 class="weather-temp">--춿C</h3>
                        <p class="weather-condition">Cargando clima...</p>
                        <div class="weather-icon"></div>
                    </div>
                </div>

                <!-- Noticias -->
                <div class="dashboard-card" data-section="news">
                    <div class="card-icon">
                        <i data-lucide="newspaper"></i>
                    </div>
                    <div class="card-content">
                        <h3>칔ltimas Noticias</h3>
                        <p>Informaci칩n agr칤cola actualizada</p>
                        <span class="card-badge">5 nuevas</span>
                    </div>
                </div>

                <!-- Salud Animal -->
                <div class="dashboard-card" data-section="animals">
                    <div class="card-icon">
                        <i data-lucide="heart"></i>
                    </div>
                    <div class="card-content">
                        <h3>Salud Animal</h3>
                        <p>Gu칤as y protocolos veterinarios</p>
                        <span class="card-badge">12 gu칤as</span>
                    </div>
                </div>

                <!-- Salud Vegetal -->
                <div class="dashboard-card" data-section="plants">
                    <div class="card-icon">
                        <i data-lucide="leaf"></i>
                    </div>
                    <div class="card-content">
                        <h3>Salud Vegetal</h3>
                        <p>Manejo de plagas y enfermedades</p>
                        <span class="card-badge">8 recursos</span>
                    </div>
                </div>

                <!-- Tiz칩n Tard칤o -->
                <div class="dashboard-card" data-section="potato-blight">
                    <div class="card-icon">
                        <i data-lucide="thermometer"></i>
                    </div>
                    <div class="card-content">
                        <h3>Tiz칩n Tard칤o</h3>
                        <p>Monitoreo INIA para Castro</p>
                        <span class="card-badge status-green">Verde</span>
                    </div>
                </div>

                <!-- Directorio -->
                <div class="dashboard-card" data-section="directory">
                    <div class="card-icon">
                        <i data-lucide="phone"></i>
                    </div>
                    <div class="card-content">
                        <h3>Directorio Local</h3>
                        <p>Servicios agr칤colas y veterinarios</p>
                        <span class="card-badge">5 servicios</span>
                    </div>
                </div>
            </div>

            <!-- Resumen de Actividades Recientes -->
            <div class="recent-activities">
                <h3>游늵 Resumen del D칤a</h3>
                <div class="activity-summary">
                    <div class="summary-item">
                        <i data-lucide="cloud-rain"></i>
                        <span>칔ltima lluvia: 2 d칤as</span>
                    </div>
                    <div class="summary-item">
                        <i data-lucide="thermometer"></i>
                        <span>Temperatura promedio: 18춿C</span>
                    </div>
                    <div class="summary-item">
                        <i data-lucide="newspaper"></i>
                        <span>Noticias actualizadas: Hoy</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- News Section -->
        <section id="news" class="content-section">
            <div class="section-header">
                <h2>Noticias Agr칤colas</h2>
                <p>Informaci칩n actualizada del sector agr칤cola de Chilo칠</p>
            </div>

            <div class="news-filters">
                <button class="filter-btn active" data-filter="all">Todas</button>
                <button class="filter-btn" data-filter="indap">INDAP</button>
                <button class="filter-btn" data-filter="municipalidad">Municipalidad</button>
                <button class="filter-btn" data-filter="sag">SAG</button>
                <button class="filter-btn" data-filter="veterinary">Veterinaria</button>
            </div>

            <div class="news-container">
                <div class="news-list">
                    <!-- Las noticias se cargar치n din치micamente -->
                </div>
                <div class="news-empty" style="display: none;">
                    <i data-lucide="newspaper"></i>
                    <h3>No hay noticias disponibles</h3>
                    <p>Configura las APIs para obtener noticias reales</p>
                    <button onclick="app.showAdminPanel()" class="btn-primary">Configurar APIs</button>
                </div>
            </div>
        </section>

        <!-- Animals Section -->
        <section id="animals" class="content-section">
            <div class="section-header">
                <h2>Salud Animal</h2>
                <p>Gu칤as y protocolos para el manejo sanitario del ganado</p>
            </div>

            <div class="animal-categories">
                <div class="category-card" data-category="vaccination">
                    <div class="category-icon">
                        <i data-lucide="syringe"></i>
                    </div>
                    <h3>Vacunaci칩n</h3>
                    <p>Protocolos de vacunaci칩n para diferentes especies</p>
                    <span class="resource-count">5 gu칤as</span>
                </div>

                <div class="category-card" data-category="nutrition">
                    <div class="category-icon">
                        <i data-lucide="apple"></i>
                    </div>
                    <h3>Nutrici칩n</h3>
                    <p>Planes de alimentaci칩n y suplementaci칩n</p>
                    <span class="resource-count">3 gu칤as</span>
                </div>

                <div class="category-card" data-category="diagnosis">
                    <div class="category-icon">
                        <i data-lucide="stethoscope"></i>
                    </div>
                    <h3>Diagn칩stico</h3>
                    <p>Identificaci칩n de enfermedades comunes</p>
                    <span class="resource-count">2 gu칤as</span>
                </div>

                <div class="category-card" data-category="prevention">
                    <div class="category-icon">
                        <i data-lucide="shield"></i>
                    </div>
                    <h3>Prevenci칩n</h3>
                    <p>Medidas preventivas y bioseguridad</p>
                    <span class="resource-count">2 gu칤as</span>
                </div>
            </div>
        </section>

        <!-- Plants Section -->
        <section id="plants" class="content-section">
            <div class="section-header">
                <h2>Salud Vegetal</h2>
                <p>Manejo integrado de plagas y enfermedades en cultivos</p>
            </div>

            <div class="plant-categories">
                <div class="category-card" data-category="pests">
                    <div class="category-icon">
                        <i data-lucide="bug"></i>
                    </div>
                    <h3>Control de Plagas</h3>
                    <p>Identificaci칩n y control de insectos 쒬햣햢햦혝햣햩햦</p>
                    <span class="resource-count">3 recursos</span>
                </div>

                <div class="category-card" data-category="fertilization">
                    <div class="category-icon">
                        <i data-lucide="flask"></i>
                    </div>
                    <h3>Fertilizaci칩n</h3>
                    <p>Programas de fertilizaci칩n para diferentes cultivos</p>
                    <span class="resource-count">2 recursos</span>
                </div>

                <div class="category-card" data-category="prevention">
                    <div class="category-icon">
                        <i data-lucide="activity"></i>
                    </div>
                    <h3>Prevenci칩n</h3>
                    <p>Medidas preventivas para enfermedades vegetales</p>
                    <span class="resource-count">2 recursos</span>
                </div>

                <div class="category-card" data-category="pruning">
                    <div class="category-icon">
                        <i data-lucide="scissors"></i>
                    </div>
                    <h3>Poda</h3>
                    <p>T칠cnicas de poda para diferentes especies</p>
                    <span class="resource-count">1 recurso</span>
                </div>
            </div>
        </section>

        <!-- Weather Section -->
        <section id="weather" class="content-section">
            <div class="section-header">
                <h2>Clima en Castro</h2>
                <p>Informaci칩n meteorol칩gica actualizada para la agricultura</p>
            </div>

            <div class="weather-main">
                <div class="weather-current">
                    <div class="weather-icon-large">
                        <i data-lucide="cloud-sun"></i>
                    </div>
                    <div class="weather-info">
                        <h1 class="weather-temp-large">--춿C</h1>
                        <p class="weather-condition-large">Cargando...</p>
                        <p class="weather-location">Castro, Chilo칠</p>
                        <p class="weather-updated">Actualizado: --:--</p>
                    </div>
                </div>

                <div class="weather-details">
                    <!-- Los detalles se cargar치n din치micamente -->
                </div>
            </div>

            <div class="weather-forecast">
                <h3>Pron칩stico Extendido</h3>
                <div class="forecast-container">
                    <div class="forecast-day">
                        <p class="day-name">Hoy</p>
                        <i data-lucide="cloud-rain"></i>
                        <p class="temp-range">15춿 - 22춿</p>
                    </div>
                    <div class="forecast-day">
                        <p class="day-name">Ma침ana</p>
                        <i data-lucide="cloud-sun"></i>
                        <p class="temp-range">16춿 - 24춿</p>
                    </div>
                    <div class="forecast-day">
                        <p class="day-name">Pasado</p>
                        <i data-lucide="sun"></i>
                        <p class="temp-range">18춿 - 26춿</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Activities Section -->
        <section id="activities" class="content-section">
            <div class="section-header">
                <h2>Calendario de Actividades</h2>
                <p>Programaci칩n de eventos y actividades agr칤colas</p>
            </div>

            <div class="activities-container">
                <div class="activities-empty">
                    <i data-lucide="calendar"></i>
                    <h3>No hay actividades programadas</h3>
                    <p>Agrega actividades del calendario usando el bot칩n +</p>
                </div>
            </div>
        </section>

        <!-- Products Section -->
        <section id="products" class="content-section">
            <div class="section-header">
                <h2>Mercado de Productos</h2>
                <p>Comercio de productos agr칤colas locales</p>
            </div>

            <div class="products-container">
                <div class="products-empty">
                    <i data-lucide="shopping-bag"></i>
                    <h3>No hay productos disponibles</h3>
                    <p>Los productores pueden agregar sus productos usando el bot칩n +</p>
                </div>
            </div>
        </section>

        <!-- Directory Section -->
        <section id="directory" class="content-section">
            <div class="section-header">
                <h2>Directorio de Servicios</h2>
                <p>Contactos de servicios agr칤colas y veterinarios en Castro</p>
            </div>

            <div class="directory-categories">
                <button class="directory-tab active" data-category="all">Todos</button>
                <button class="directory-tab" data-category="agriculture">Agricultura</button>
                <button class="directory-tab" data-category="veterinary">Veterinaria</button>
                <button class="directory-tab" data-category="supplies">Insumos</button>
            </div>

            <div class="directory-list">
                <div class="directory-item">
                    <div class="item-icon">
                        <i data-lucide="phone"></i>
                    </div>
                    <div class="item-content">
                        <h4>AGROABONOS</h4>
                        <p>Productos agr칤colas y fertilizantes</p>
                        <p class="item-phone">65 2 635928</p>
                    </div>
                    <button class="call-btn" onclick="window.open('tel:+5652635928')">
                        <i data-lucide="phone-call"></i>
                    </button>
                </div>

                <div class="directory-item">
                    <div class="item-icon">
                        <i data-lucide="phone"></i>
                    </div>
                    <div class="item-content">
                        <h4>COOPRINSEM</h4>
                        <p>Cooperativa de productos y servicios</p>
                        <p class="item-phone">65 2 627630</p>
                    </div>
                    <button class="call-btn" onclick="window.open('tel:+5652627630')">
                        <i data-lucide="phone-call"></i>
                    </button>
                </div>

                <div class="directory-item">
                    <div class="item-icon">
                        <i data-lucide="phone"></i>
                    </div>
                    <div class="item-content">
                        <h4>COVEPA sucursal Castro</h4>
                        <p>Cooperativa de venta y producci칩n agr칤cola</p>
                        <p class="item-phone">65 2 636800</p>
                    </div>
                    <button class="call-btn" onclick="window.open('tel:+5652636800')">
                        <i data-lucide="phone-call"></i>
                    </button>
                </div>

                <div class="directory-item">
                    <div class="item-icon">
                        <i data-lucide="phone"></i>
                    </div>
                    <div class="item-content">
                        <h4>Veterinaria San Francisco</h4>
                        <p>Atenci칩n veterinaria para animales</p>
                        <p class="item-phone">65 2 635382</p>
                    </div>
                    <button class="call-btn" onclick="window.open('tel:+5652635382')">
                        <i data-lucide="phone-call"></i>
                    </button>
                </div>

                <div class="directory-item">
                    <div class="item-icon">
                        <i data-lucide="phone"></i>
                    </div>
                    <div class="item-content">
                        <h4>Veterinaria Pudulhuapi</h4>
                        <p>Servicios veterinarios especializados</p>
                        <p class="item-phone">65 2 635283</p>
                    </div>
                    <button class="call-btn" onclick="window.open('tel:+5652635283')">
                        <i data-lucide="phone-call"></i>
                    </button>
                </div>
            </div>
        </section>

        <!-- Potato Blight Section -->
        <section id="potato-blight" class="content-section">
            <div class="section-header">
                <h2>Monitoreo Tiz칩n Tard칤o</h2>
                <p>Sistema de alerta para condiciones favorables al desarrollo del tiz칩n tard칤o en papa</p>
            </div>

            <div class="blight-alert">
                <div class="alert-header">
                    <i data-lucide="thermometer"></i>
                    <h3>Sistema de Monitoreo INIA</h3>
                </div>
                <p class="alert-description">
                    Sistema meteorol칩gico especializado para detectar condiciones favorables 
                    para el desarrollo del tiz칩n tard칤o en cultivos de papa en la zona de Castro, Chilo칠.
                </p>
            </div>

            <div class="stations-container">
                <!-- Las estaciones se cargar치n din치micamente -->
            </div>

            <div class="legend-container">
                <h4>Leyenda de Alertas</h4>
                <div class="legend">
                    <div class="legend-item">
                        <span class="color-indicator red"></span>
                        <span>ROJA: Condiciones MUY FAVORABLES - Aplicar fungicida</span>
                    </div>
                    <div class="legend-item">
                        <span class="color-indicator orange"></span>
                        <span>NARANJA: Condiciones FAVORABLES - Aplicar fungicida</span>
                    </div>
                    <div class="legend-item">
                        <span class="color-indicator yellow"></span>
                        <span>AMARILLA: Condiciones MEDIO-BAJO - Revisar en 3 d칤as</span>
                    </div>
                    <div class="legend-item">
                        <span class="color-indicator green"></span>
                        <span>VERDE: No hay condiciones para desarrollo</span>
                    </div>
                    <div class="legend-item">
                        <span class="color-indicator blue"></span>
                        <span>AZUL: Primera alerta de la temporada</span>
                    </div>
                    <div class="legend-item">
                        <span class="color-indicator brown"></span>
                        <span>CAF칄: Inicio de temporada</span>
                    </div>
                </div>
            </div>

            <div class="recommendations">
                <h4>Recomendaciones Generales</h4>
                <ul>
                    <li>Monitorear especialmente cultivos de junio-julio que son vulnerables desde septiembre en adelante</li>
                    <li>Aumentar la vigilancia por incremento del in칩culo, especialmente desde papas voluntarias</li>
                    <li>Registrarse en el sistema para recibir alertas personalizadas por SMS o email</li>
                </ul>
            </div>
        </section>
    </main>

    <!-- FAB (Floating Action Button) -->
    <button class="fab" id="fabBtn">
        <i data-lucide="plus"></i>
    </button>

    <!-- Modal -->
    <div class="modal" id="modal">
        <div class="modal-overlay" id="modalClose"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Agregar Contenido</h3>
                <button class="modal-close" id="modalClose">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <div class="modal-body" id="modalContent">
                <form id="contentForm">
                    <div class="form-group">
                        <label for="contentTitle">T칤tulo</label>
                        <input type="text" id="contentTitle" required>
                    </div>
                    <div class="form-group">
                        <label for="contentText">Contenido</label>
                        <textarea id="contentText" rows="4" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="contentCategory">Categor칤a</label>
                        <select id="contentCategory">
                            <option value="general">General</option>
                            <option value="agriculture">Agricultura</option>
                            <option value="veterinary">Veterinaria</option>
                            <option value="reminder">Recordatorio</option>
                        </select>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn-secondary" id="cancelBtn">Cancelar</button>
                        <button type="submit" class="btn-primary">Guardar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Notificaciones -->
    <div class="notifications-container" id="notifications"></div>

    <!-- Scripts -->
    <script src="scripts/app-real-apis.js"></script>
    <script>
        // Registrar Service Worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/service-worker.js')
                .then(registration => console.log('SW registered'))
                .catch(registrationError => console.log('SW registration failed'));
        }

        // Inicializar Lucide Icons
        lucide.createIcons();
    </script>
</body>
</html>